<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>play - eclipse.</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon/favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Raleway:wght@300;400&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="assets/css/styles.css" />
  <style>
    :root{--bg:#0f0e0e;--card:#1e160b;--accent:#b88640;--muted:#bdb1a0}
    body{background:var(--bg);color:#eee;font-family:Raleway,system-ui,Segoe UI,Roboto,Arial;margin:0;overflow-y:auto}
    .player-app{display:flex;gap:20px;padding:28px;min-height:100vh;box-sizing:border-box}
    .player-wrap{flex:1;background:transparent;display:flex;flex-direction:column;gap:12px}
    .player-header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
    .player-title{font-family:Montserrat,Arial;font-size:20px;margin:0;color:#fff}
    .player-desc{color:var(--muted);margin:0;font-size:14px}
    .player-frame{flex:1;min-height:600px;border-radius:12px;overflow:hidden;background:#000;border:2px solid rgba(255,255,255,0.03)}
    .player-frame iframe{width:100%;height:100%;border:0;display:block}
    .sidebar{width:320px;background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 24px rgba(0,0,0,0.4);align-self:flex-start;position:sticky;top:20px;max-height:calc(100vh - 40px);overflow:hidden;display:flex;flex-direction:column}
    .sidebar h4{margin:0 0 12px 0;font-size:14px;color:var(--accent);text-transform:uppercase}
    .game-list{display:flex;flex-direction:column;gap:10px;overflow-y:auto;flex:1;padding-right:6px}
    .game-list::-webkit-scrollbar{width:8px}
    .game-list::-webkit-scrollbar-track{background:rgba(0,0,0,0.2);border-radius:4px}
    .game-list::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px}
    .game-list::-webkit-scrollbar-thumb:hover{background:#d4a050}
    .side-item{display:flex;flex-direction:column;padding:10px;border-radius:8px;background:rgba(0,0,0,0.05);cursor:pointer;color:#eee;text-decoration:none;transition:all 0.2s}
    .side-item:hover{background:rgba(184,134,64,0.2)}
    .side-item.active{background:var(--accent);color:var(--bg)}
    .side-item .name{font-weight:700;font-size:14px}
    .side-item .cat{font-size:11px;color:var(--muted);text-transform:uppercase;margin-top:4px}
    .side-item.active .cat{color:rgba(15,14,14,0.7)}
    .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .btn{background:transparent;border:2px solid var(--accent);color:var(--accent);padding:6px 10px;border-radius:8px;cursor:pointer;text-decoration:none;display:inline-block;transition:all 0.2s}
    .btn:hover{background:rgba(184,134,64,0.1)}
    .btn.primary{background:var(--accent);color:var(--bg)}
    .btn.primary:hover{background:#d4a050}
    .loading{text-align:center;color:var(--muted);padding:20px;font-size:14px}
    @media(max-width:900px){.player-app{flex-direction:column}.sidebar{width:100%;order:2;position:static;max-height:400px}}
  </style>
</head>
<body>

<div class="player-app">
  <div class="player-wrap">
    <div class="player-header">
      <div>
        <h2 class="player-title" id="title">Loading...</h2>
        <p class="player-desc" id="description"></p>
      </div>
      <div class="controls">
        <button class="btn" id="backBtn"><i class="fa-solid fa-arrow-left"></i>&nbsp;Back</button>
        <a id="openRawBtn" class="btn" target="_blank">Open Raw</a>
      </div>
    </div>

    <div class="player-frame" id="frameWrap">
      <iframe id="gameFrame" src="about:blank" title="Game player" sandbox="allow-scripts allow-same-origin allow-forms allow-pointer-lock allow-popups" allowfullscreen></iframe>
    </div>
  </div>

  <aside class="sidebar" aria-label="Other games list">
    <h4>Other Games</h4>
    <div class="game-list" id="gameList">
      <div class="loading">Loading games...</div>
    </div>
  </aside>

</div>

<script>
  const allGames = [
    { name: "1v1lol", folder: "1v1lol", category: "action" },
    { name: "10 Minutes Till Dawn", folder: "10-minutes-till-dawn", category: "action" },
    { name: "2048 Multitask", folder: "2048-multitask", category: "puzzle" },
    { name: "2048", folder: "2048", category: "puzzle" },
    { name: "9007199254740992", folder: "9007199254740992", category: "arcade" },
    { name: "A Dance Of Fire And Ice", folder: "a-dance-of-fire-and-ice", category: "arcade" },
    { name: "A Dark Room", folder: "a-dark-room", category: "arcade" },
    { name: "Adrenaline Challenge", folder: "adrenaline-challenge", category: "arcade" },
    { name: "Adventure Drivers", folder: "adventure-drivers", category: "racing" },
    { name: "Ages Of Conflict", folder: "ages-of-conflict", category: "strategy" },
    { name: "Backrooms 2D", folder: "backrooms-2d", category: "arcade" },
    { name: "Backrooms", folder: "backrooms", category: "arcade" },
    { name: "Bacon May Die", folder: "bacon-may-die", category: "action" },
    { name: "Bad Ice Cream 2", folder: "bad-ice-cream-2", category: "arcade" },
    { name: "Bad Ice Cream 3", folder: "bad-ice-cream-3", category: "arcade" },
    { name: "Bad Ice Cream", folder: "bad-ice-cream", category: "arcade" },
    { name: "Baldis Basics", folder: "baldis-basics", category: "arcade" },
    { name: "Basket Random", folder: "basket-random", category: "sports" },
    { name: "Bitlife", folder: "bitlife", category: "arcade" },
    { name: "Boxing Random", folder: "boxing-random", category: "sports" },
    { name: "Btts", folder: "btts", category: "arcade" },
    { name: "Buckshot Roulette", folder: "buckshot-roulette", category: "arcade" },
    { name: "Cluster Rush", folder: "cluster-rush", category: "action" },
    { name: "Core Ball", folder: "core-ball", category: "arcade" },
    { name: "Creative Kill Chamber", folder: "creative-kill-chamber", category: "action" },
    { name: "Crossy Road", folder: "crossy-road", category: "arcade" },
    { name: "Cupcake 2048", folder: "cupcake-2048", category: "puzzle" },
    { name: "Dante", folder: "dante", category: "arcade" },
    { name: "Deal Or No Deal", folder: "deal-or-no-deal", category: "arcade" },
    { name: "Death Run 3D", folder: "death-run-3d", category: "action" },
    { name: "Drift Boss", folder: "drift-boss", category: "racing" },
    { name: "Drift Hunters", folder: "drift-hunters", category: "racing" },
    { name: "Drive Mad", folder: "drive-mad", category: "racing" },
    { name: "Duck Life 3", folder: "duck-life-3", category: "arcade" },
    { name: "Duck Life 4", folder: "duck-life-4", category: "arcade" },
    { name: "Eggy Car", folder: "eggy-car", category: "racing" },
    { name: "Fnaw", folder: "fnaw", category: "arcade" },
    { name: "Funny Shooter 2", folder: "funny-shooter-2", category: "action" },
    { name: "Funny Shooter", folder: "funny-shooter", category: "action" },
    { name: "Getaway Shootout", folder: "getaway-shootout", category: "action" },
    { name: "Learn To Fly 2", folder: "learn-to-fly-2", category: "arcade" },
    { name: "Learn To Fly", folder: "learn-to-fly", category: "arcade" },
    { name: "Madalin Stunt Cars 2", folder: "madalin-stunt-cars-2", category: "racing" },
    { name: "Madalin Stunt Cars 3", folder: "madalin-stunt-cars-3", category: "racing" },
    { name: "Monkey Mart", folder: "monkey-mart", category: "arcade" },
    { name: "Motox3M 2", folder: "motox3m-2", category: "racing" },
    { name: "Motox3M Pool", folder: "motox3m-pool", category: "racing" },
    { name: "Motox3M Spooky", folder: "motox3m-spooky", category: "racing" },
    { name: "Motox3M Winter", folder: "motox3m-winter", category: "racing" },
    { name: "Motox3M", folder: "motox3m", category: "racing" },
    { name: "Resent Client", folder: "resent-client", category: "arcade" },
    { name: "Retro Bowl", folder: "retro-bowl", category: "sports" },
    { name: "Rooftop Snipers", folder: "rooftop-snipers", category: "action" },
    { name: "Run 2", folder: "run-2", category: "arcade" },
    { name: "Run 3", folder: "run-3", category: "arcade" },
    { name: "Scrap Metal", folder: "scrap-metal", category: "arcade" },
    { name: "Slope 2", folder: "slope-2", category: "arcade" },
    { name: "Slope Ball", folder: "slope-ball", category: "arcade" },
    { name: "Slope", folder: "slope", category: "arcade" },
    { name: "Snow Rider 3D", folder: "snow-rider-3d", category: "arcade" },
    { name: "Soccer Random", folder: "soccer-random", category: "sports" },
    { name: "Stickman Hook", folder: "stickman-hook", category: "arcade" },
    { name: "Super Hot", folder: "super-hot", category: "arcade" },
    { name: "Tanuki Sunset", folder: "tanuki-sunset", category: "arcade" },
    { name: "Tunnel Rush", folder: "tunnel-rush", category: "action" },
    { name: "Ultrakill", folder: "ultrakill", category: "arcade" },
    { name: "Vex 3", folder: "vex-3", category: "arcade" },
    { name: "Vex 4", folder: "vex-4", category: "arcade" },
    { name: "Vex 5", folder: "vex-5", category: "arcade" },
    { name: "Vex 6", folder: "vex-6", category: "arcade" },
    { name: "Vex 7", folder: "vex-7", category: "arcade" },
    { name: "Volley Random", folder: "volley-random", category: "sports" },
    { name: "Worlds Hardest Game 2", folder: "worlds-hardest-game-2", category: "arcade" },
    { name: "Worlds Hardest Game", folder: "worlds-hardest-game", category: "arcade" }
  ];

  const params = new URLSearchParams(location.search);
  const gameFolder = params.get('game');

  const titleEl = document.getElementById('title');
  const descEl = document.getElementById('description');
  const frame = document.getElementById('gameFrame');
  const listEl = document.getElementById('gameList');
  const openRawBtn = document.getElementById('openRawBtn');

  let currentGame = null;

  function setGame(folder) {
    const game = allGames.find(g => g.folder === folder);
    
    if (game) {
      currentGame = game;
      const gamePath = `games/${folder}/index.html`;
      
      titleEl.textContent = game.name;
      descEl.textContent = game.category.toUpperCase();
      frame.src = gamePath;
      openRawBtn.href = gamePath;
      
      document.querySelectorAll('.side-item').forEach(el => el.classList.remove('active'));
      const active = document.querySelector(`.side-item[data-folder="${folder}"]`);
      if(active) active.classList.add('active');
      
      history.replaceState({}, '', `?game=${encodeURIComponent(folder)}`);
    } else {
      titleEl.textContent = 'Game Not Found';
      descEl.textContent = '';
    }
  }

  function buildList() {
    listEl.innerHTML = '';
    
    const shuffled = [...allGames].sort(() => Math.random() - 0.5);
    const displayGames = shuffled.slice(0, 50);
    
    displayGames.forEach(g => {
      const a = document.createElement('a');
      a.className = 'side-item';
      a.href = '#';
      a.setAttribute('data-folder', g.folder);
      a.innerHTML = `<div class="name">${g.name}</div><div class="cat">${g.category}</div>`;
      a.addEventListener('click', (e) => {
        e.preventDefault();
        setGame(g.folder);
      });
      listEl.appendChild(a);
    });
  }

  document.getElementById('backBtn').addEventListener('click', () => { 
    window.location.href = 'games.html'; 
  });

  buildList();
  
  if (gameFolder) {
    setGame(gameFolder);
  } else {
    setGame(allGames[0].folder);
  }

</script>
</body>
</html>